import coinmarketcap
import plotly
import mysqldb
import json
import requests
import sys
import appjar

function scrapeCoin():
	
	get coin values from coinmarketcap
	load coin names and values into coins{} dictionary
	global coins{}
	
function readFile(file_dir):
	
	global coins
	coins = {}
	
	db = file_dir
	sql = select * from db
	
	loop through all records:
		coins.update = current coin:current value
		
	
function createFile(file_dir):
	
	db = file_dir
	sql = CREATE TABLE HOLDINGS(
		bitcoin: FLOAT,
		litecoin: FLOAT,
		vertcoin: FLOAT)
	
	close db

function editHoldings(coin_name):
	
	global coins
	newval = textbox.val
	coins[coin_name] = newval
	return coins

function saveFile(file_dir):
	
	global coins
	db = dir
	
	loop through no. pairs in coins{}
		sql = UPDATE currentpair in db
		
	close db
	
function displayFile():
	
	global coins
	loop through no. pairs in coins{}:
		display current coin.key
		display current coin.value
		
function getTotalVal():
	
	global coins,totalVal
	loop through all records
		totalVal += current coin[key]
	
	return totalVal

function toggleCurrency():
	
	global totalVal
	
	gbp_rate = scrape USD/GBP value
	eur_rate = scrape USD/EUR value
	
	gbp_total = (totalVal * gbp_rate)
	eur_rate = (totalVal * eur_rate)
	
	currency = []
	currency[0] = gbp_total
	currency[1] = eur_total
	currency[2] = totalVal
	
	if current currency = currency[0]:
		current currency = currency[1]
		
	elif current currency = currency[1]:
		currency currency = currency[2]
		
	else current currency = currency[2]:
		current currency currency[0]

function pieChart():
	global coins
	
	labels = ["bitcoin","litecoin","vertcoin"]
	values = []
	for i in range(2):
		values[i] = coins[labels[i]]
		
	generate pie chart
	output to directory specified in textbox

function Quit():
	exit()

function initialForm():

	first = gui()
	
	form layout and buttons generated
	
	file read button calls readForm form
	file create button calls createForm Form
	
	hide first form
	call mainForm()
	
function mainForm():
	
	global totalVal, coins
	main = gui()
	form layout and buttons generated
	
	total value displayed at top of form with getTotalVal function 
	holdings of each coin displayed alongside with displayFile
	
	quit button exits program execution with Quit function
	add button calls addForm form
	file read button calls readForm form
	save file button calls saveForm form
	edit current holdings button calls editForm form
	toggle currency button calls toggleCurrency function
	generate pie chart button calls pieChart function
	
function readForm():
	
	on button press: readFile(file_dir)
	on cancel press hide form and show mainForm

function saveForm():
	
	on button press: savefile(file_dir)
	on cancel press hide form and show mainForm

function editForm():
	
	on button press: editHoldings(coin_name)
	on cancel press hide form and show mainForm
	
function addForm():
	
	on button press: editHoldings(coin_name)
	on cancel press hide form and show mainForm	
	
function createForm():

	on button press: createFile(file_dir)
	on cancel press hide form and show mainForm
	
initialForm()
	
	
	
	
	
	
	
	
	
	
	
	
	
	